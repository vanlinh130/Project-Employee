<app-navigation></app-navigation>
<div class="main">
  <app-header></app-header>
  <div class="surface-card p-4 shadow-2 border-round col-10 md:col-8 lg:col-8 col-offset-1 md:col-offset-2 lg:col-offset-2 mt-3" >
    <form  [formGroup]="employeeForm">
      <div class="card-header mb-3">
        <h2 class="text-center">Edit New Employee</h2>
      </div>
      <div class="grid formgrid p-fluid" *ngIf="employee">

        <div class="field mb-3 col-12 md:col-12 lg:col-6">
          <label for="name">Name *</label>
          <input formControlName="name" id="name" type="text" name="name" placeholder="Full name"
            pInputText [(ngModel)]="employee.name" style="height: 40px;"
            [ngClass]="{'ng-dirty': (employeeForm.get('name')?.invalid && submitted) ||
            (employeeForm.get('name')?.dirty && employeeForm.get('name')?.invalid)}">

          <small id="nameHid" *ngIf="(employeeForm.get('name')?.invalid && submitted) ||
            (employeeForm.get('name')?.dirty && employeeForm.get('name')?.invalid)" class="p-error">
            <p *ngIf="employeeForm.get('name')?.errors?.['required']">Name is required</p>
            <p *ngIf="employeeForm.get('name')?.errors?.['minlength']">Name is required > 6</p>
          </small>
        </div>

        <div class="field mb-3 col-12 md:col-12 lg:col-6">
          <label for="email">Email *</label>
          <input formControlName="email" id="email" type="email" name="email"
            placeholder="abc@gmail.com" pInputText [(ngModel)]="employee.email" email="@gmail.com" style="height: 40px;"
            [ngClass]="{'ng-dirty': (employeeForm.get('email')?.invalid && submitted) ||
            (employeeForm.get('email')?.dirty && employeeForm.get('email')?.invalid)}">

          <small id="emailHid" *ngIf="(employeeForm.get('email')?.invalid && submitted) ||
            (employeeForm.get('email')?.dirty && employeeForm.get('email')?.invalid)" class="p-error">
            <p *ngIf="employeeForm.get('email')?.errors?.['required']">Email is required</p>
            <p *ngIf="employeeForm.get('email')?.errors?.['emailPattern']">For example abc@gmail.com</p>
          </small>

        </div>

        <div class="field mb-3 col-12 md:col-12 lg:col-6">
          <label for="phone">Phone *</label>
          <input formControlName="phone" id="phone" type="text" name="phone" placeholder="Phone" pInputText
            [(ngModel)]="employee.phone" style="height: 40px;"
            [ngClass]="{'ng-dirty': (employeeForm.get('name')?.invalid && submitted) ||
            (employeeForm.get('name')?.dirty && employeeForm.get('name')?.invalid)}">

          <small id="phoneHid" *ngIf="(employeeForm.get('phone')?.invalid && submitted) ||
            (employeeForm.get('phone')?.dirty && employeeForm.get('phone')?.invalid)" class="p-error">
            <p *ngIf="employeeForm.get('phone')?.errors?.['required']">Phone is required</p>
            <p *ngIf="employeeForm.get('phone')?.errors?.['maxlength']">Phone is required < 10</p>
          </small>
        </div>

        <div class="field mb-3 col-12 md:col-12 lg:col-6">
          <label for="password">Password *</label>
          <input formControlName="password" id="password" type="password" name="password"
            placeholder="password"  pInputText [(ngModel)]="employee.password" style="height: 40px;"
            [ngClass]="{'ng-dirty': (employeeForm.get('password')?.invalid && submitted) ||
            (employeeForm.get('password')?.dirty && employeeForm.get('password')?.invalid)}">

          <small id="passwordHid" *ngIf="(employeeForm.get('password')?.invalid && submitted) ||
            (employeeForm.get('password')?.dirty && employeeForm.get('password')?.invalid)" class="p-error">
            <p *ngIf="employeeForm.get('password')?.errors?.['required']">Password is required</p>
            <p *ngIf="employeeForm.get('password')?.errors?.['minlength']">Password 6 characters is required</p>
          </small>
        </div>

        <div class="field mb-3 col-12 md:col-12 lg:col-6">
          <label for="enrollDate">date *</label>
          <p-calendar formControlName="date" id="enrollDate" type="text" name="enrollDate"
            placeholder="99/99/9999" [showIcon]="true" [(ngModel)]="employee.enrollDate" [style]="{'height': '40px'}"
            [ngClass]="{'ng-dirty': (employeeForm.get('date')?.invalid && submitted) ||
            (employeeForm.get('date')?.dirty && employeeForm.get('date')?.invalid)}"></p-calendar>

          <small id="dateHid" *ngIf="(employeeForm.get('date')?.invalid && submitted) ||
            (employeeForm.get('date')?.dirty && employeeForm.get('date')?.invalid)" class="p-error">
            <p *ngIf="employeeForm.get('date')?.errors?.['required']">Date is required</p>
          </small>
        </div>

        <div class="field mb-3 col-12 md:col-12 lg:col-6 lg:flex ">
          <div class="field mb-3 col-12 md:col-12 lg:col-6">
            <label for="status">Status *</label>
            <br>
            <select id="status" type="text" name="status" class="form-control"
              [(ngModel)]="employee.status" formControlName="status"
              [ngClass]="{'ng-dirty': (employeeForm.get('status')?.invalid && submitted) ||
              (employeeForm.get('status')?.dirty && employeeForm.get('status')?.invalid)}">
              <option>Đang làm việc</option>
              <option>Đã nghĩ việc</option>
              <option>Đang chờ</option>
            </select>
            <small id="statusHid" *ngIf="(employeeForm.get('status')?.invalid && submitted) ||
              (employeeForm.get('status')?.dirty && employeeForm.get('status')?.invalid)" class="p-error">
              <p *ngIf="employeeForm.get('status')?.errors?.['required']">Status is required</p>
            </small>
          </div>

          <div class="field mb-3 col-12 md:col-12 lg:col-6">
            <label for="role">Role *</label>
            <br>
            <select id="role" type="text" name="role" class="form-control" formControlName="role"
              [(ngModel)]="employee.role" formControlName="role"
              [ngClass]="{'ng-dirty': (employeeForm.get('role')?.invalid && submitted) ||
              (employeeForm.get('role')?.dirty && employeeForm.get('role')?.invalid)}">
              <option>Leader</option>
              <option>Employee</option>
            </select>
            <small id="roleHid" *ngIf="(employeeForm.get('role')?.invalid && submitted) ||
              (employeeForm.get('role')?.dirty && employeeForm.get('role')?.invalid)" class="p-error">
              <p *ngIf="employeeForm.get('role')?.errors?.['required']">Role is required</p>
            </small>
          </div>
        </div>


        <div class="field mb-3 col-12 md:col-12 lg:col-6">
          <label for="gender">Gender *</label>
          <input id="gender" type="text" name="gender"
            pInputText [(ngModel)]="employee.gender"
            formControlName="gender" placeholder=""  style="height: 40px;"
            [ngClass]="{'ng-dirty': (employeeForm.get('gender')?.invalid && submitted) ||
            (employeeForm.get('gender')?.dirty && employeeForm.get('gender')?.invalid)}">

          <small id="genderHid" *ngIf="(employeeForm.get('gender')?.invalid && submitted) ||
            (employeeForm.get('gender')?.dirty && employeeForm.get('gender')?.invalid)" class="p-error">
            <p *ngIf="employeeForm.get('gender')?.errors?.['required']">Gender is required</p>
          </small>

          <div [style]="{'margin': '20px 0'}">
            <div class="field-radiobutton male-btn-radio col-12 md:col-6 lg:col-4"
              [style]="{'float': 'left', 'padding-right': '30px'}">
              <p-radioButton name="gender" value="Male" [(ngModel)]="employee.gender"
               formControlName="gender" inputId="gender1"></p-radioButton>
              <label for="gender1" [style]="{'margin': '0 8px'}">Male</label>
            </div>
            <div class="field-radiobutton col-12 md:col-6 lg:col-4" [style]="{'float': 'left', 'padding-right': '30px'}">
              <p-radioButton name="gender" value="Female" [(ngModel)]="employee.gender"
                formControlName="gender" inputId="gender2"></p-radioButton>
              <label for="gender2" [style]="{'margin': '0 8px'}">Female</label>
            </div>

          </div>
        </div>


        <div class="field mb-3 col-12 md:col-12 lg:col-6">
          <label for="work">description</label>
          <textarea formControlName="description" rows="3" cols="30" id="work" type="text" name="work"
            placeholder="Description..."  pInputTextarea [(ngModel)]="employee.work"
            [ngClass]="{'ng-dirty': (employeeForm.get('description')?.invalid && submitted) ||
            (employeeForm.get('description')?.dirty && employeeForm.get('description')?.invalid)}"></textarea>

          <small id="descriptionHid" *ngIf="(employeeForm.get('description')?.invalid && submitted) ||
            (employeeForm.get('description')?.dirty && employeeForm.get('description')?.invalid)" class="p-error">
            <p *ngIf="employeeForm.get('description')?.errors?.['required']">Description is required</p>
            <p *ngIf="employeeForm.get('description')?.errors?.['maxlength']">Description is required < 100</p>
          </small>
        </div>
      </div>

      <div class="card-footer text-muted">
        <div class="footer-btn">
          <p-button [routerLink]="['/employee-list']" label="Cancel" icon="pi pi-times" styleClass="p-button-secondary w-full md:w-auto lg:w-auto h-2.5rem mr-3 mb-3 md:mb-0 lg:mb-0 "></p-button>
          <p-button label="Save" icon="pi pi-check" (click)="update()" styleClass="w-full md:w-auto lg:w-auto h-2.5rem"></p-button>
        </div>
      </div>

    </form>
  </div>
</div>
